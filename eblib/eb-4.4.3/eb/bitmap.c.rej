***************
*** 1214,1219 ****
  eb_bitmap_to_png(const char *bitmap, int width, int height, char *png,
      size_t *png_length)
  {
      EB_Error_Code error_code;
      char *png_p = png;
      char *idat_start;
--- 1214,1228 ----
  eb_bitmap_to_png(const char *bitmap, int width, int height, char *png,
      size_t *png_length)
  {
+ 	return eb_bitmap_to_png2(bitmap, width, height, png, 
+ 							 png_length, PNG_FOREGROUND_COLOR);
+ }
+ 	
+ 
+ EB_Error_Code
+ eb_bitmap_to_png2(const char *bitmap, int width, int height, char *png,
+ 	size_t *png_length, unsigned int forground_color)
+ {
      EB_Error_Code error_code;
      char *png_p = png;
      char *idat_start;
***************
*** 1241,1247 ****
       * Set global colors.
       */
      RGB2CHARS(png_p + 41, PNG_BACKGROUND_COLOR);
!     RGB2CHARS(png_p + 44, PNG_FOREGROUND_COLOR);
      crc = png_crc(png_p + 37, 10);
      INT2CHARS(png_p + 47, crc);
  
--- 1250,1256 ----
       * Set global colors.
       */
      RGB2CHARS(png_p + 41, PNG_BACKGROUND_COLOR);
!     RGB2CHARS(png_p + 44, forground_color);
      crc = png_crc(png_p + 37, 10);
      INT2CHARS(png_p + 47, crc);
  
